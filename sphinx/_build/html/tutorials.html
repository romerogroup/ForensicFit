

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorials &mdash; Forensic Fit  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Preprocessing" href="preprocess.html" />
    <link rel="prev" title="Developers" href="developers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Forensic Fit
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">Developers</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preprocessing">Preprocessing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#single-image-processing">1. Single image processing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#loading-the-image-and-show">1.1. Loading the image and show</a></li>
<li class="toctree-l4"><a class="reference internal" href="#splitting-the-image-vertically">1.2. Splitting the image vertically</a></li>
<li class="toctree-l4"><a class="reference internal" href="#finding-the-tilt-of-the-image">1.3. Finding the tilt of the image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plot-boundaries">1.4. Plot Boundaries</a></li>
<li class="toctree-l4"><a class="reference internal" href="#auto-crop-in-y-direction">1.5. Auto Crop in Y direction</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rotate-image">1.6. Rotate Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="#coordinate-based">1.7. Coordinate Based</a></li>
<li class="toctree-l4"><a class="reference internal" href="#weft-based">1.8. Weft based</a></li>
<li class="toctree-l4"><a class="reference internal" href="#max-contrast">1.9. Max Contrast</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Package API</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Forensic Fit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tutorials</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorials.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorials">
<h1>Tutorials<a class="headerlink" href="#tutorials" title="Permalink to this headline">¶</a></h1>
<p>The following set of tutorials explains the basic usage of this package.
The examples provide information on how to use the preprocessing method for different
approaches. Later it will explain how one can use the data generated in this
section in different Machine Learning approaches using keras package.</p>
<div class="section" id="preprocessing">
<h2>Preprocessing<a class="headerlink" href="#preprocessing" title="Permalink to this headline">¶</a></h2>
<p>At first we will explain the steps one has to take to process a single image,
Then we will move to processing directories of images. Each gray scale image is constructed from a grid of pixels. Each pixel contains a number from 0 to 255 representing the gray shade of that specific pixel.</p>
<div class="section" id="single-image-processing">
<h3>1. Single image processing<a class="headerlink" href="#single-image-processing" title="Permalink to this headline">¶</a></h3>
<p>All of our tutorials are eplained in ipython interactive session, However these
commands can be easily moved to a python script for more automation.</p>
<div class="section" id="loading-the-image-and-show">
<h4>1.1. Loading the image and show<a class="headerlink" href="#loading-the-image-and-show" title="Permalink to this headline">¶</a></h4>
<p>Given the path to the image forensicfit will create a TapeImage object.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">forensicfit</span>
<span class="n">tape_image</span> <span class="o">=</span> <span class="n">forensicfit</span><span class="o">.</span><span class="n">TapeImage</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;L001.tiff&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">tape_image</span></code> is a TapeImage object with different properties and method in
this section we will explain the usage of each method and property.
Before explaining each of the methods, let’s list the input parameter of this
class. A comprehensive description of each parameter is provided in the
<a class="reference external" href="forensicfit.preprocess.html#module-forensicfit.preprocess.tape_image">API package</a> section.
To show the image we can use the method <code class="docutils literal notranslate"><span class="pre">show</span></code>.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span> <span class="o">=</span> <span class="n">forensicfir</span><span class="o">.</span><span class="n">TapeImage</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;LQ_775.tiff&#39;</span><span class="p">)</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The following plot will appear as a confirmation that the image has been loaded.
As <code class="docutils literal notranslate"><span class="pre">cmap</span></code> defines the color map for the gray scale image.</p>
<img alt="_images/1.show.png" class="align-center" src="_images/1.show.png" />
<p><code class="docutils literal notranslate"><span class="pre">gaussian_blur</span></code> is also an important filter that is applied in the begining of this class.
This filter is applied to image to decrease the image noise and help the finding of the
boundaries. A good number usually depends on the amount of the noise the scanner
adds to the image. This parameter defines the window of pixels in which this filter is applied.
The default of this paramter is <code class="docutils literal notranslate"><span class="pre">gaussian_blur=(15,15)</span></code>. To demonstrate the effects of this
filter we choose a large window to exagerate the effect. The window has to be alway constructed
by odd numbers.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span> <span class="o">=</span> <span class="n">forensicfit</span><span class="o">.</span><span class="n">preprocess</span><span class="o">.</span><span class="n">TapeImage</span><span class="p">(</span><span class="s1">&#39;LQ_775.tif&#39;</span><span class="p">,</span>
                            <span class="n">gaussian_blur</span><span class="o">=</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="mi">101</span><span class="p">))</span>
</pre></div>
</div>
<img alt="_images/1.gaussian_blur.png" class="align-center" src="_images/1.gaussian_blur.png" />
</div>
<div class="section" id="splitting-the-image-vertically">
<h4>1.2. Splitting the image vertically<a class="headerlink" href="#splitting-the-image-vertically" title="Permalink to this headline">¶</a></h4>
<p>Sometimes one does not need one side of the image. To address this issue <code class="docutils literal notranslate"><span class="pre">split</span></code>
parameter is implemented.One has to turn on the split paramter by <code class="docutils literal notranslate"><span class="pre">split=True</span></code>,
Then select the side of the image that is important to us (<code class="docutils literal notranslate"><span class="pre">'L'</span></code> for left or <code class="docutils literal notranslate"><span class="pre">'R'</span></code> for right)
by <code class="docutils literal notranslate"><span class="pre">split_side='L'</span></code> (important: do not forget that this parameter has to a python string), and
finally one has to choose the <code class="docutils literal notranslate"><span class="pre">split_position</span></code>. split_position can only be a number between 0
and 1. for example if <code class="docutils literal notranslate"><span class="pre">split_position=0.5</span></code>, the image will be divided in the half way line. The defaults are
<code class="docutils literal notranslate"><span class="pre">split=False</span></code>, <code class="docutils literal notranslate"><span class="pre">split_position=0.5</span></code> and <code class="docutils literal notranslate"><span class="pre">split_side='L'</span></code>.
Let’s also view the split image by using the <code class="docutils literal notranslate"><span class="pre">show()</span></code> method.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span> <span class="o">=</span> <span class="n">forensicfir</span><span class="o">.</span><span class="n">TapeImage</span><span class="p">(</span><span class="n">fname</span><span class="o">=</span><span class="s1">&#39;LQ_775.tiff&#39;</span><span class="p">,</span>
                                    <span class="n">split</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                                    <span class="n">split_side</span><span class="o">=</span><span class="s1">&#39;L&#39;</span><span class="p">,</span>
                                    <span class="n">split_position</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/2.split_L.png" class="align-center" src="_images/2.split_L.png" />
</div>
<div class="section" id="finding-the-tilt-of-the-image">
<h4>1.3. Finding the tilt of the image<a class="headerlink" href="#finding-the-tilt-of-the-image" title="Permalink to this headline">¶</a></h4>
<p>During the scanning process one might not position the image exactly parallel to the
horizontal line. The property of <code class="docutils literal notranslate"><span class="pre">image_tilt</span></code> can calculate the tilt of the tape. To calculate
this number the algorithm finds the boundaries at the top and the bottom of the image.
Then each line is divided in 6 segments(our experience showed that 6 is segments usually works good).
The first and the last segments are discarted to avoid noise close to the edge. The the slop and standard
deviation(in y direction) is calculated with a linear fit. The two
segments with the least are selected from the top and bottom. Furthur more the average angle
by each line is reported in degrees.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">tape_image</span><span class="o">.</span><span class="n">image_tilt</span><span class="p">)</span>
<span class="mf">0.12844069008595374</span>
</pre></div>
</div>
<p>If one wants to monitor all of the steps of the selection of the best segment for angle calculation,
One can use the <code class="docutils literal notranslate"><span class="pre">get_image_tilt(plot=True)</span></code>, with the plot parameter turn on(True).</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">get_image_tilt</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This method will produce two plots one with all of the segments shown in diferent colors,</p>
<img alt="_images/3.tilt_1_all.png" class="align-center" src="_images/3.tilt_1_all.png" />
<p>and one with the two segments with the least standard deviation, plotted over the detected boundary.</p>
<img alt="_images/3.tilt_2_best.png" class="align-center" src="_images/3.tilt_2_best.png" />
</div>
<div class="section" id="plot-boundaries">
<h4>1.4. Plot Boundaries<a class="headerlink" href="#plot-boundaries" title="Permalink to this headline">¶</a></h4>
<p>This class automatically(using opencv) detects the boundaries. To plot this boundary
one has to use, <code class="docutils literal notranslate"><span class="pre">plot_boundary(color='red')</span></code>. As it’s self explanatory the color
parameter changes the color of the boundary. To plot this boundary one has to plot
the image first then use the plot boundary similar to the following example.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">plot_boundary</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="auto-crop-in-y-direction">
<h4>1.5. Auto Crop in Y direction<a class="headerlink" href="#auto-crop-in-y-direction" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">auto_crop_y()</span></code> will automatically crop the image based on the boundaries that it found.
To make this example more interesting we add a plot boundary function as well.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">auto_crop_y</span><span class="p">()</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">plot_boundary</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/5.auto_crop_y.png" class="align-center" src="_images/5.auto_crop_y.png" />
</div>
<div class="section" id="rotate-image">
<h4>1.6. Rotate Image<a class="headerlink" href="#rotate-image" title="Permalink to this headline">¶</a></h4>
<p>As the name suggests This method will perform an rotation around the center of the image.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">rotate_image</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="coordinate-based">
<h4>1.7. Coordinate Based<a class="headerlink" href="#coordinate-based" title="Permalink to this headline">¶</a></h4>
<p>This method will return a 2 dimentional array of coordinates of points on the edge.
The most important parameter for this method is <code class="docutils literal notranslate"><span class="pre">npoints</span></code> representing the number of
points in the returned array. This method divides the edge into the small sections and
returns the average of each section as one point. if the parameter <code class="docutils literal notranslate"><span class="pre">plot</span></code> is set to true
the plots will be plotted on the main image. The following example contains 1000 points for
the resulting array.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">coordinate_based</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">x_trim_param</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span><span class="n">npoints</span><span class="o">=</span><span class="mi">500</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/7.coordinate_based_zoomed.png" src="_images/7.coordinate_based_zoomed.png" />
<img alt="_images/7.coordinate_based.png" src="_images/7.coordinate_based.png" />
</div>
<div class="section" id="weft-based">
<h4>1.8. Weft based<a class="headerlink" href="#weft-based" title="Permalink to this headline">¶</a></h4>
<p>In order to get as close as possible to a regular examination, this method was
added. This method will divide the edge of the image by the number of segments
defined by <code class="docutils literal notranslate"><span class="pre">nsegments</span></code>. If this value is chose to be as close as the number of
wefts in a specific tape, the segments will be close to separating the segments
by the wefts. There are three important paramters that can be passed on to this
method. <code class="docutils literal notranslate"><span class="pre">window_backround</span></code> and <code class="docutils literal notranslate"><span class="pre">window_tape</span></code> define the number of pixels
that are going to be considered from the edge towards the background and from the
edge towards the tape respectively. There two different approaches that one can
define the window, either the whole window is fixed for the whole image or the window
can moves to adjust the same amount of background and tape to be involve in the image.
This can be defined by <code class="docutils literal notranslate"><span class="pre">dynamic_window</span></code> equal to <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code>. The
following example can illustrate the dynamic window better. The image on the left
represents <code class="docutils literal notranslate"><span class="pre">dynamic=True</span></code> and the image on the right represent <code class="docutils literal notranslate"><span class="pre">dynamic=False</span></code>.
Similar to the coordinate based, if one choose <code class="docutils literal notranslate"><span class="pre">plot=True</span></code>, one can oversee the
boundary and window selection by plotting the results.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">weft_based</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">dynamic_window</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">nsegments</span><span class="o">=</span><span class="mi">39</span><span class="p">,</span>
                  <span class="n">window_background</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span><span class="n">window_tape</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
<span class="n">tape_image</span><span class="o">.</span><span class="n">weft_based</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">dynamic_window</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">nsegments</span><span class="o">=</span><span class="mi">39</span><span class="p">,</span>
                  <span class="n">window_background</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span><span class="n">window_tape</span><span class="o">=</span><span class="mi">300</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/6.weft_based_dynamic1.png"><img alt="_images/6.weft_based_dynamic1.png" src="_images/6.weft_based_dynamic1.png" style="width: 49.5%;" /></a>
<a class="reference internal image-reference" href="_images/6.weft_based.png"><img alt="_images/6.weft_based.png" src="_images/6.weft_based.png" style="width: 49.5%;" /></a>
<p>If <code class="docutils literal notranslate"><span class="pre">nsegments</span></code> is set to a small number, this approach can be looked at as a
big picture approach that can help improve the weft base approach.</p>
</div>
<div class="section" id="max-contrast">
<h4>1.9. Max Contrast<a class="headerlink" href="#max-contrast" title="Permalink to this headline">¶</a></h4>
<p>This method makes a maximum contrast between the edge and the rest of the image.
The rest of the image is represneted by a white color(255) and the rest of the
image is represented by a black color(0). Similar to the weft based one can choose
the number of pixels included in the <code class="docutils literal notranslate"><span class="pre">window_background</span></code> and the <code class="docutils literal notranslate"><span class="pre">wondow_tape</span></code>.
<code class="docutils literal notranslate"><span class="pre">window_backround</span></code> and <code class="docutils literal notranslate"><span class="pre">window_tape</span></code> define the number of pixels
that are going to be considered from the edge towards the background and from the
edge towards the tape respectively. There two different approaches that one can
define the window, either the whole window is fixed for the whole image or the window
can moves to adjust the same amount of background and tape to be involve in the image.
Similar to the coordinate based, if one choose <code class="docutils literal notranslate"><span class="pre">plot=True</span></code>, one can oversee the
boundary and window selection by plotting the results. In the following example
we choose the default for the <code class="docutils literal notranslate"><span class="pre">window_background</span></code> and <code class="docutils literal notranslate"><span class="pre">window_tape</span></code>.</p>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tape_image</span><span class="o">.</span><span class="n">max_contrast</span><span class="p">(</span><span class="n">plot</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/9.max_contrast.png"><img alt="_images/9.max_contrast.png" class="align-center" src="_images/9.max_contrast.png" style="width: 20%;" /></a>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="preprocess.html">Preprocessing</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="preprocess.html" class="btn btn-neutral float-right" title="Preprocessing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="developers.html" class="btn btn-neutral float-left" title="Developers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Pedram Tavadze.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>